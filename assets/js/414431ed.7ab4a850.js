"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[831],{3905:(a,e,t)=>{t.d(e,{Zo:()=>N,kt:()=>h});var s=t(67294);function n(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function m(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.push.apply(t,s)}return t}function p(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach((function(e){n(a,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))}))}return a}function r(a,e){if(null==a)return{};var t,s,n=function(a,e){if(null==a)return{};var t,s,n={},m=Object.keys(a);for(s=0;s<m.length;s++)t=m[s],e.indexOf(t)>=0||(n[t]=a[t]);return n}(a,e);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(a);for(s=0;s<m.length;s++)t=m[s],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(a,t)&&(n[t]=a[t])}return n}var l=s.createContext({}),i=function(a){var e=s.useContext(l),t=e;return a&&(t="function"==typeof a?a(e):p(p({},e),a)),t},N=function(a){var e=i(a.components);return s.createElement(l.Provider,{value:e},a.children)},c="mdxType",o={inlineCode:"code",wrapper:function(a){var e=a.children;return s.createElement(s.Fragment,{},e)}},k=s.forwardRef((function(a,e){var t=a.components,n=a.mdxType,m=a.originalType,l=a.parentName,N=r(a,["components","mdxType","originalType","parentName"]),c=i(t),k=n,h=c["".concat(l,".").concat(k)]||c[k]||o[k]||m;return t?s.createElement(h,p(p({ref:e},N),{},{components:t})):s.createElement(h,p({ref:e},N))}));function h(a,e){var t=arguments,n=e&&e.mdxType;if("string"==typeof a||n){var m=t.length,p=new Array(m);p[0]=k;var r={};for(var l in e)hasOwnProperty.call(e,l)&&(r[l]=e[l]);r.originalType=a,r[c]="string"==typeof a?a:n,p[1]=r;for(var i=2;i<m;i++)p[i]=t[i];return s.createElement.apply(null,p)}return s.createElement.apply(null,t)}k.displayName="MDXCreateElement"},1909:(a,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>p,default:()=>o,frontMatter:()=>m,metadata:()=>r,toc:()=>i});var s=t(87462),n=(t(67294),t(3905));const m={id:"Robotics - Control - BRT",title:"Backward Reachable Tube",sidebar_position:10},p=void 0,r={unversionedId:"Robotics/Control/Robotics - Control - BRT",id:"Robotics/Control/Robotics - Control - BRT",title:"Backward Reachable Tube",description:"---",source:"@site/docs/Robotics/Control/BRT.md",sourceDirName:"Robotics/Control",slug:"/Robotics/Control/Robotics - Control - BRT",permalink:"/myWiki/Robotics/Control/Robotics - Control - BRT",draft:!1,editUrl:"https://github.com/pwang649/myWiki/edit/main/docs/Robotics/Control/BRT.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{id:"Robotics - Control - BRT",title:"Backward Reachable Tube",sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"More on Safety",permalink:"/myWiki/Robotics/Control/Robotics - Control - Safety"},next:{title:"Gentle Start",permalink:"/myWiki/Machine Learning Theory/Machine Learning Theory - Start"}},l={},i=[{value:"Problem 1",id:"problem-1",level:2},{value:"Problem 2",id:"problem-2",level:2},{value:"Code",id:"code",level:4},{value:"Problem 3",id:"problem-3",level:2},{value:"Part 1",id:"part-1",level:3},{value:"Part 2",id:"part-2",level:3},{value:"BRT_computation.m",id:"brt_computationm",level:4},{value:"optCtrl.m",id:"optctrlm",level:4},{value:"optDstb.m",id:"optdstbm",level:4},{value:"Part 3",id:"part-3",level:3},{value:"Test case 4",id:"test-case-4",level:4},{value:"Test case 5",id:"test-case-5",level:4},{value:"Least-restrictive Code",id:"least-restrictive-code",level:4},{value:"Part 4",id:"part-4",level:3},{value:"Test case 4",id:"test-case-4-1",level:4},{value:"Test case 5",id:"test-case-5-1",level:4},{value:"QP Code",id:"qp-code",level:4}],N={toc:i},c="wrapper";function o(a){let{components:e,...m}=a;return(0,n.kt)(c,(0,s.Z)({},N,m,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"problem-1"},"Problem 1"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("div",{parentName:"li",className:"math math-display"},(0,n.kt)("span",{parentName:"div",className:"katex-display"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mi",{parentName:"mrow"},"l"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,n.kt)("mi",{parentName:"mrow"},"x"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,n.kt)("mo",{parentName:"mrow"},"="),(0,n.kt)("msqrt",{parentName:"mrow"},(0,n.kt)("mrow",{parentName:"msqrt"},(0,n.kt)("msubsup",{parentName:"mrow"},(0,n.kt)("mi",{parentName:"msubsup"},"p"),(0,n.kt)("mi",{parentName:"msubsup"},"x"),(0,n.kt)("mn",{parentName:"msubsup"},"2")),(0,n.kt)("mo",{parentName:"mrow"},"+"),(0,n.kt)("msubsup",{parentName:"mrow"},(0,n.kt)("mi",{parentName:"msubsup"},"p"),(0,n.kt)("mi",{parentName:"msubsup"},"y"),(0,n.kt)("mn",{parentName:"msubsup"},"2")))),(0,n.kt)("mo",{parentName:"mrow"},"\u2212"),(0,n.kt)("mn",{parentName:"mrow"},"0.5"),(0,n.kt)("mspace",{parentName:"mrow",linebreak:"newline"}),(0,n.kt)("mi",{parentName:"mrow"},"B"),(0,n.kt)("mi",{parentName:"mrow"},"R"),(0,n.kt)("mi",{parentName:"mrow"},"T"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,n.kt)("mi",{parentName:"mrow"},"t"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,n.kt)("mo",{parentName:"mrow"},"="),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},"{"),(0,n.kt)("mi",{parentName:"mrow"},"x"),(0,n.kt)("mo",{parentName:"mrow"},":"),(0,n.kt)("mi",{parentName:"mrow"},"l"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,n.kt)("mi",{parentName:"mrow"},"x"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,n.kt)("mo",{parentName:"mrow"},"\u2264"),(0,n.kt)("mn",{parentName:"mrow"},"0"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},"}"),(0,n.kt)("mtext",{parentName:"mrow"},"\xa0for\xa0"),(0,n.kt)("mn",{parentName:"mrow"},"0"),(0,n.kt)("mo",{parentName:"mrow"},"\u2264"),(0,n.kt)("mi",{parentName:"mrow"},"t"),(0,n.kt)("mo",{parentName:"mrow"},"\u2264"),(0,n.kt)("mi",{parentName:"mrow"},"T")),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"l(x) = \\sqrt{p_x^2+p_y^2} - 0.5 \\\\ BRT(t) = \\{x : l(x) \\leq 0\\} \\text{ for } 0 \\leq t \\leq T")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.01968em"}},"l"),(0,n.kt)("span",{parentName:"span",className:"mopen"},"("),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,n.kt)("span",{parentName:"span",className:"mclose"},")"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"="),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1.84em",verticalAlign:"-0.6276em"}}),(0,n.kt)("span",{parentName:"span",className:"mord sqrt"},(0,n.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.2124em"}},(0,n.kt)("span",{parentName:"span",className:"svg-align",style:{top:"-3.8em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.8em"}}),(0,n.kt)("span",{parentName:"span",className:"mord",style:{paddingLeft:"1em"}},(0,n.kt)("span",{parentName:"span",className:"mord"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"p"),(0,n.kt)("span",{parentName:"span",className:"msupsub"},(0,n.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.7401em"}},(0,n.kt)("span",{parentName:"span",style:{top:"-2.453em",marginLeft:"0em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"x"))),(0,n.kt)("span",{parentName:"span",style:{top:"-2.989em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mtight"},"2")))),(0,n.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.247em"}},(0,n.kt)("span",{parentName:"span"})))))),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.kt)("span",{parentName:"span",className:"mord"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"p"),(0,n.kt)("span",{parentName:"span",className:"msupsub"},(0,n.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.7401em"}},(0,n.kt)("span",{parentName:"span",style:{top:"-2.453em",marginLeft:"0em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal mtight",style:{marginRight:"0.03588em"}},"y"))),(0,n.kt)("span",{parentName:"span",style:{top:"-2.989em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mtight"},"2")))),(0,n.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3831em"}},(0,n.kt)("span",{parentName:"span"})))))))),(0,n.kt)("span",{parentName:"span",style:{top:"-3.1724em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.8em"}}),(0,n.kt)("span",{parentName:"span",className:"hide-tail",style:{minWidth:"1.02em",height:"1.88em"}},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.88em",viewBox:"0 0 400000 1944",preserveAspectRatio:"xMinYMin slice"},(0,n.kt)("path",{parentName:"svg",d:"M983 90\nl0 -0\nc4,-6.7,10,-10,18,-10 H400000v40\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM1001 80h400000v40h-400000z"}))))),(0,n.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.6276em"}},(0,n.kt)("span",{parentName:"span"}))))),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,n.kt)("span",{parentName:"span",className:"mord"},"0.5")),(0,n.kt)("span",{parentName:"span",className:"mspace newline"}),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"BRT"),(0,n.kt)("span",{parentName:"span",className:"mopen"},"("),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,n.kt)("span",{parentName:"span",className:"mclose"},")"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"="),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mopen"},"{"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},":"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.01968em"}},"l"),(0,n.kt)("span",{parentName:"span",className:"mopen"},"("),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,n.kt)("span",{parentName:"span",className:"mclose"},")"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"\u2264"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord"},"0"),(0,n.kt)("span",{parentName:"span",className:"mclose"},"}"),(0,n.kt)("span",{parentName:"span",className:"mord text"},(0,n.kt)("span",{parentName:"span",className:"mord"},"\xa0for\xa0")),(0,n.kt)("span",{parentName:"span",className:"mord"},"0"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"\u2264"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"\u2264"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T"))))))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The unsafe set in this case is just the failure set itself. This is because, at the edge of the failure set, we can instantly change the heading away from it, bringing us away from the failure set.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"If the failure set is our target set:"),(0,n.kt)("div",{parentName:"li",className:"math math-display"},(0,n.kt)("span",{parentName:"div",className:"katex-display"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mi",{parentName:"mrow"},"B"),(0,n.kt)("mi",{parentName:"mrow"},"R"),(0,n.kt)("mi",{parentName:"mrow"},"T"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,n.kt)("mi",{parentName:"mrow"},"t"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,n.kt)("mo",{parentName:"mrow"},"="),(0,n.kt)("msqrt",{parentName:"mrow"},(0,n.kt)("mrow",{parentName:"msqrt"},(0,n.kt)("msubsup",{parentName:"mrow"},(0,n.kt)("mi",{parentName:"msubsup"},"p"),(0,n.kt)("mi",{parentName:"msubsup"},"x"),(0,n.kt)("mn",{parentName:"msubsup"},"2")),(0,n.kt)("mo",{parentName:"mrow"},"+"),(0,n.kt)("msubsup",{parentName:"mrow"},(0,n.kt)("mi",{parentName:"msubsup"},"p"),(0,n.kt)("mi",{parentName:"msubsup"},"y"),(0,n.kt)("mn",{parentName:"msubsup"},"2")))),(0,n.kt)("mo",{parentName:"mrow"},"\u2212"),(0,n.kt)("mn",{parentName:"mrow"},"0.5"),(0,n.kt)("mo",{parentName:"mrow"},"\u2212"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,n.kt)("mi",{parentName:"mrow"},"T"),(0,n.kt)("mo",{parentName:"mrow"},"\u2212"),(0,n.kt)("mi",{parentName:"mrow"},"t"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,n.kt)("mo",{parentName:"mrow"},"\u2264"),(0,n.kt)("mn",{parentName:"mrow"},"0")),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"BRT(t) = \\sqrt{p_x^2+p_y^2} - 0.5 - (T - t) \\leq 0")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"BRT"),(0,n.kt)("span",{parentName:"span",className:"mopen"},"("),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,n.kt)("span",{parentName:"span",className:"mclose"},")"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"="),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1.84em",verticalAlign:"-0.6276em"}}),(0,n.kt)("span",{parentName:"span",className:"mord sqrt"},(0,n.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.2124em"}},(0,n.kt)("span",{parentName:"span",className:"svg-align",style:{top:"-3.8em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.8em"}}),(0,n.kt)("span",{parentName:"span",className:"mord",style:{paddingLeft:"1em"}},(0,n.kt)("span",{parentName:"span",className:"mord"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"p"),(0,n.kt)("span",{parentName:"span",className:"msupsub"},(0,n.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.7401em"}},(0,n.kt)("span",{parentName:"span",style:{top:"-2.453em",marginLeft:"0em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"x"))),(0,n.kt)("span",{parentName:"span",style:{top:"-2.989em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mtight"},"2")))),(0,n.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.247em"}},(0,n.kt)("span",{parentName:"span"})))))),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.kt)("span",{parentName:"span",className:"mord"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"p"),(0,n.kt)("span",{parentName:"span",className:"msupsub"},(0,n.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.7401em"}},(0,n.kt)("span",{parentName:"span",style:{top:"-2.453em",marginLeft:"0em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal mtight",style:{marginRight:"0.03588em"}},"y"))),(0,n.kt)("span",{parentName:"span",style:{top:"-2.989em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mtight"},"2")))),(0,n.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3831em"}},(0,n.kt)("span",{parentName:"span"})))))))),(0,n.kt)("span",{parentName:"span",style:{top:"-3.1724em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.8em"}}),(0,n.kt)("span",{parentName:"span",className:"hide-tail",style:{minWidth:"1.02em",height:"1.88em"}},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.88em",viewBox:"0 0 400000 1944",preserveAspectRatio:"xMinYMin slice"},(0,n.kt)("path",{parentName:"svg",d:"M983 90\nl0 -0\nc4,-6.7,10,-10,18,-10 H400000v40\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM1001 80h400000v40h-400000z"}))))),(0,n.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.6276em"}},(0,n.kt)("span",{parentName:"span"}))))),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.kt)("span",{parentName:"span",className:"mord"},"0.5"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mopen"},"("),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,n.kt)("span",{parentName:"span",className:"mclose"},")"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"\u2264"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,n.kt)("span",{parentName:"span",className:"mord"},"0"))))))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'We can reach the goal set anywhere because we can just set the heading toward it. Therefore, we expect our "unsafe set" to be infinitely big. Here, in our program, we run for 2 seconds at the speed of 1 m/s. Therefore, we expect the gap to be 2 meters from the target st.'))),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"problem-2"},"Problem 2"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Maximize value function (going away from the failure set):"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{src:t(43135).Z,width:"750",height:"771"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Minimize value function (going into the target set):"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{src:t(66812).Z,width:"750",height:"771"})))),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"This aligns perfectly with my analytical computation.")),(0,n.kt)("h4",{id:"code"},"Code"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-octave"},"%% TODO\n% Compute the optimal control\nif strcmp(uMode, 'max')\n  uOpt = atan2(deriv{obj.dims==2}, deriv{obj.dims==1});\nelseif strcmp(uMode, 'min')\n  uOpt = atan2(deriv{obj.dims==2}, deriv{obj.dims==1})-pi;\nelse\n  error('Unknown uMode!')\nend\n")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"problem-3"},"Problem 3"),(0,n.kt)("h3",{id:"part-1"},"Part 1"),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(95818).Z,width:"1000",height:"889"}),"\n",(0,n.kt)("img",{src:t(93827).Z,width:"1701",height:"1601"})),(0,n.kt)("h3",{id:"part-2"},"Part 2"),(0,n.kt)("h4",{id:"brt_computationm"},"BRT_computation.m"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-octave"},"%% TODO\n% Define the grid for the computation: g\ngrid_min = [-10; -10; -pi]; % Lower corner of computation domain\ngrid_max = [10; 10; pi];    % Upper corner of computation domain\nN = [51; 51; 51];         % Number of grid points per dimension\npdDims = 3;               % 3rd dimension is periodic\ng = createGrid(grid_min, grid_max, N, pdDims);\n\n%% TODO\n% Define the failure set: data0\ndata0 = shapeUnion(shapeRectangleByCorners(g, [obsX1; obsY1; -inf], ...\n[obsX1+width1; obsY1+height1; inf]), shapeRectangleByCorners(g, [obsX2; obsY2; -inf],... \n[obsX2+width2; obsY2+height2; inf]));\n")),(0,n.kt)("h4",{id:"optctrlm"},"optCtrl.m"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-octave"},"if strcmp(uMode, 'max')\n  uOpt = (deriv{3}>=0)*obj.wRange(2) + (deriv{3}<0)*(obj.wRange(1));\nelseif strcmp(uMode, 'min')\n  uOpt = (deriv{3}>=0)*(obj.wRange(1)) + (deriv{3}<0)*obj.wRange(2);\nelse\n  error('Unknown uMode!')\nend\n")),(0,n.kt)("h4",{id:"optdstbm"},"optDstb.m"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-octave"},"theta = atan2(-deriv{2}, -deriv{1});\ndOpt{1} = obj.dMax * cos(theta);% Compute the optimal disturbance in x\ndOpt{2} = obj.dMax * sin(theta);% Compute the optimal disturbance in y\n")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Heading: ",(0,n.kt)("span",{parentName:"p",className:"math math-inline"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mn",{parentName:"mrow"},"0")),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,n.kt)("span",{parentName:"span",className:"mord"},"0")))))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{src:t(98273).Z,width:"768",height:"771"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Heading: ",(0,n.kt)("span",{parentName:"p",className:"math math-inline"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mi",{parentName:"mrow"},"\u03c0"),(0,n.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"/"),(0,n.kt)("mn",{parentName:"mrow"},"2")),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\pi/2")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03588em"}},"\u03c0"),(0,n.kt)("span",{parentName:"span",className:"mord"},"/2")))))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{src:t(7e3).Z,width:"768",height:"771"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Heading: ",(0,n.kt)("span",{parentName:"p",className:"math math-inline"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mi",{parentName:"mrow"},"\u03c0")),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\pi")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03588em"}},"\u03c0")))))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{src:t(25478).Z,width:"768",height:"771"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Heading: ",(0,n.kt)("span",{parentName:"p",className:"math math-inline"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mo",{parentName:"mrow"},"\u2212"),(0,n.kt)("mi",{parentName:"mrow"},"\u03c0"),(0,n.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"/"),(0,n.kt)("mn",{parentName:"mrow"},"2")),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"-\\pi/2")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord"},"\u2212"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03588em"}},"\u03c0"),(0,n.kt)("span",{parentName:"span",className:"mord"},"/2")))))),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{src:t(92633).Z,width:"768",height:"771"})))),(0,n.kt)("h3",{id:"part-3"},"Part 3"),(0,n.kt)("h4",{id:"test-case-4"},"Test case 4"),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(34947).Z,width:"1000",height:"889"})),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(68741).Z,width:"1710",height:"1601"})),(0,n.kt)("h4",{id:"test-case-5"},"Test case 5"),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(10849).Z,width:"1000",height:"889"})),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(7666).Z,width:"1710",height:"1601"})),(0,n.kt)("h4",{id:"least-restrictive-code"},"Least-restrictive Code"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-octave"},"if (eval_u(params.g,params.data(:,:,:,end),x_curr) <= 0)  % the system will end in unsafe state!\n        u_filtered = eval_u(params.g,params.safety_controller,x_curr); % get safety controller\nelse\n        u_filtered = u_nom;\nend\n")),(0,n.kt)("h3",{id:"part-4"},"Part 4"),(0,n.kt)("h4",{id:"test-case-4-1"},"Test case 4"),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(11992).Z,width:"1000",height:"889"})),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(63941).Z,width:"1710",height:"1601"})),(0,n.kt)("h4",{id:"test-case-5-1"},"Test case 5"),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(46830).Z,width:"2000",height:"1730"})),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(92730).Z,width:"1692",height:"1601"})),(0,n.kt)("h4",{id:"qp-code"},"QP Code"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-octave"},"%% TODO\n% Code in the quadratic program that implement the QP\n% min(u) 0.5*||u_nom -u||^2 st u is a safe control \nA = -dvdx(3)*params.dt;\nb = valuex+dvdx(1)*(cos(current_state(3))+params.speed)*params.dt+dvdx(2)*(sin(current_state(3))+params.speed)*params.dt + ...\n    params.dt * dvdx(1) .* optDst(1) + params.dt * dvdx(2) .* optDst(2);\nu_qp_filtered = fmincon(@(u)0.5*(u-u_nom)^2, u_nom,[A],[b], [], [], [], [], [], options);\n")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"The control is smoother than that of part 3, demonstrated by the control profile.")))}o.isMDXComponent=!0},43135:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_1-e05fcb5a2b5e759ead5afceaa054f150.png"},68741:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_10-f12317c475201569e1d4068c69ac25ef.png"},10849:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_11-6ebf538eb0dcd769d6dd1b6110a07e32.png"},7666:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_12-672e8faacaf40eaa59daa6c85511e5f5.png"},11992:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_13-12f9061179e87b2d03e72f4b432dc037.png"},63941:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_14-ad57ec211ccb26f4734fc1c960f802f7.png"},46830:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_15-1f28d22788135088ba2de14712836a45.png"},92730:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_16-88a16cdfb8f4d9b8abb5d5fd9607132f.png"},66812:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_2-27aafc5a57af752da25b2c2fd98290f0.png"},95818:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_3-29459f08acc6b43f32362ae21ce041e9.png"},93827:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_4-f97b5f78f808d05d8ec8f77ef2971ba6.png"},98273:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_5-c9054fc467786207fe129930daaf2fe4.png"},7e3:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_6-2ccc04214dffbf4cd501787841cc198b.png"},25478:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_7-fe7b68bb09aefcd7baba8f29bf9a3a41.png"},92633:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_8-bb21800da7e85e668d6157e3c9873b07.png"},34947:(a,e,t)=>{t.d(e,{Z:()=>s});const s=t.p+"assets/images/hw2_9-331b54fe4861cb060d9d4c959ecc21f5.png"}}]);