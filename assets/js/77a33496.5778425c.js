"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3379],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(a),u=r,h=p["".concat(s,".").concat(u)]||p[u]||m[u]||i;return a?n.createElement(h,o(o({ref:t},d),{},{components:a})):n.createElement(h,o({ref:t},d))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},93107:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const i={id:"Communication Protocols - SPI",title:"SPI",sidebar_position:3},o=void 0,l={unversionedId:"Communication Protocols/Communication Protocols - SPI",id:"Communication Protocols/Communication Protocols - SPI",title:"SPI",description:"Serial Peripheral Interface or SPI is a synchronous serial communication protocol that provides full \u2013 duplex communication at very high speeds. Serial Peripheral Interface (SPI) is a master \u2013 slave type protocol that provides a simple and low cost interface between a microcontroller and its peripherals.",source:"@site/docs/Communication Protocols/SPI.md",sourceDirName:"Communication Protocols",slug:"/Communication Protocols/Communication Protocols - SPI",permalink:"/myWiki/Communication Protocols/Communication Protocols - SPI",draft:!1,editUrl:"https://github.com/pwang649/myWiki/edit/master/docs/Communication Protocols/SPI.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"Communication Protocols - SPI",title:"SPI",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"I2C",permalink:"/myWiki/Communication Protocols/Communication Protocols - I2C"},next:{title:"CAN",permalink:"/myWiki/Communication Protocols/Communication Protocols - CAN"}},s={},c=[{value:"SPI Signals",id:"spi-signals",level:3},{value:"SPI Hardware",id:"spi-hardware",level:3},{value:"SPI Modes of Operation",id:"spi-modes-of-operation",level:3},{value:"Daisy Chain",id:"daisy-chain",level:3},{value:"Applications of SPI",id:"applications-of-spi",level:3},{value:"Advantages",id:"advantages",level:3},{value:"Disadvantages",id:"disadvantages",level:3},{value:"Citations",id:"citations",level:3}],d={toc:c},p="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Serial Peripheral Interface or SPI is a synchronous serial communication protocol that provides full \u2013 duplex communication at very high speeds. Serial Peripheral Interface (SPI) is a master \u2013 slave type protocol that provides a simple and low cost interface between a microcontroller and its peripherals."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://www.analog.com/-/media/images/analog-dialogue/en/volume-52/number-3/articles/introduction-to-spi-interface/205973_fig_01.svg?la=en&imgver=3",alt:null})),(0,r.kt)("h3",{id:"spi-signals"},"SPI Signals"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"SCLK")," (serial clock): The device that generates the clock signal is called the main. Data transmitted between the main and the subnode is synchronized to the clock generated by the main. SPI devices support much higher clock frequencies compared to I2C interfaces. Users should consult the product data sheet for the clock frequency specification of the SPI interface.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"SDI/SDO")," (serial data in / serial data out) or ",(0,r.kt)("strong",{parentName:"p"},"MOSI/MISO")," (Master Out Slave in / Slave In Master Out): MOSI and MISO are the data lines. MOSI transmits data from the main to the subnode and MISO transmits data from the subnode to the main.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"CS/SS")," (chip select / slave select): The chip select signal from the main is used to select the subnode. This is normally an active low signal and is pulled high to disconnect the subnode from the SPI bus. When multiple subnodes are used, an individual chip select signal for each subnode is required from the main."))),(0,r.kt)("h3",{id:"spi-hardware"},"SPI Hardware"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://www.electronicshub.org/wp-content/uploads/2017/06/SPI-Hardware.jpg",alt:null})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"From the image, the Master device consists of a Shift Register, a data latch and a clock generator. The slave consists of similar hardware: a shift register and a data latch. Both the shift registers are connected to form a loop. Usually, the size of the register is 8 \u2013 bits but higher size registers of 16 \u2013 bits are also common.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"During the positive edge of the clock signal, both the devices (master and slave) read input bit into LSB of the register. During the negative cycle of the clock signal, both the master and slave places a bit on its corresponding output from the MSB of the shift register.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Hence, for each clock cycle, a bit of data is transferred in each direction i.e. from master to slave and slave to master. So, for a byte of data to be transmitted from each device, it will take 8 clock cycles."))),(0,r.kt)("h3",{id:"spi-modes-of-operation"},"SPI Modes of Operation"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"CPOL")," (clock polarity): controls the idle state value of the clock when no data is being transferred\u200b"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"CPHA")," (clock phase): controls at which clock edge of the SCLK (1st or 2nd) the data should be sampled by the slave")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"SPI Mode"),(0,r.kt)("th",{parentName:"tr",align:null},"CPOL"),(0,r.kt)("th",{parentName:"tr",align:null},"CPHA"),(0,r.kt)("th",{parentName:"tr",align:null},"Clock Phase Used to Sample and/or Shift the Data"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"Data sampled on rising edge and shifted out on the falling edge")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Data sampled on the falling edge and shifted out on the rising edge")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"Data sampled on the rising edge and shifted out on the falling edge")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Data sampled on the falling edge and shifted out on the rising edge")))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://www.electronicshub.org/wp-content/uploads/2017/06/SPI-Modes-and-Timing.jpg",alt:null})),(0,r.kt)("h3",{id:"daisy-chain"},"Daisy Chain"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://www.electronicshub.org/wp-content/uploads/2017/06/SPI-Daisy-Chain.jpg",alt:null})),(0,r.kt)("p",null,"In Daisy Chain Configuration, only a single Slave Select line is connected to all the slaves. The MOSI of the master is connected to the MOSI of slave 1. MISO of slave 1 is connected to MOSI of slave 2 and so on. The MISO of the final slave is connected to the MISO of the master."),(0,r.kt)("p",null,"Consider the master transmits 3 bytes of data in to the SPI bus. First, the 1st byte of data is shifted to slave 1. When the 2nd byte of data reaches slave 1, the first byte is pushed in to slave 2."),(0,r.kt)("p",null,"Finally, when the 3rd byte of data arrives in to the first slave, the 1st byte of data is shifted to slave 3 and the second byte of data is shifted in to second slave."),(0,r.kt)("p",null,"If the master wants to retrieve information from the slaves, it has to send 3 bytes of junk data to the slaves so that the information in the slaves comes to the master."),(0,r.kt)("h3",{id:"applications-of-spi"},"Applications of SPI"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Memory: SD Card , MMC , EEPROM , Flash"),(0,r.kt)("li",{parentName:"ul"},"Sensors: Temperature and Pressure"),(0,r.kt)("li",{parentName:"ul"},"Control Devices: ADC , DAC , digital POTS and Audio Codec."),(0,r.kt)("li",{parentName:"ul"},"Others: Camera Lens Mount, touchscreen, LCD, RTC, video game controller, etc.")),(0,r.kt)("h3",{id:"advantages"},"Advantages"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"SPI is very simple to implement and the hardware requirements are not that complex."),(0,r.kt)("li",{parentName:"ul"},"Supports full \u2013 duplex communication at all times."),(0,r.kt)("li",{parentName:"ul"},"Very high speed of data transfer."),(0,r.kt)("li",{parentName:"ul"},"No need for individual addresses for slaves as CS or SS is used."),(0,r.kt)("li",{parentName:"ul"},"Only one master device is supported and hence there is no chance of conflicts."),(0,r.kt)("li",{parentName:"ul"},"Clock from the master is configured based on speed of the slave and hence slave doesn\u2019t have to worry about clock.")),(0,r.kt)("h3",{id:"disadvantages"},"Disadvantages"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Each additional slave requires an additional dedicated pin on master for CS or SS."),(0,r.kt)("li",{parentName:"ul"},"There is no acknowledgement mechanism and hence there is no confirmation of receipt of data."),(0,r.kt)("li",{parentName:"ul"},"Slowest device determines the speed of transfer."),(0,r.kt)("li",{parentName:"ul"},"There are no official standards and hence often used in application specific implementations."),(0,r.kt)("li",{parentName:"ul"},"There is no flow control.")),(0,r.kt)("h3",{id:"citations"},"Citations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.analog.com/en/analog-dialogue/articles/introduction-to-spi-interface.html"},"https://www.analog.com/en/analog-dialogue/articles/introduction-to-spi-interface.html")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.electronicshub.org/basics-serial-peripheral-interface-spi/#:~:text=Serial%20Peripheral%20Interface%20or%20SPI,a%20microcontroller%20and%20its%20peripherals."},"https://www.electronicshub.org/basics-serial-peripheral-interface-spi/#:~:text=Serial%20Peripheral%20Interface%20or%20SPI,a%20microcontroller%20and%20its%20peripherals."))))}m.isMDXComponent=!0}}]);