"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6081],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>k});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=p(a),u=r,k=c["".concat(s,".").concat(u)]||c[u]||d[u]||i;return a?n.createElement(k,o(o({ref:t},m),{},{components:a})):n.createElement(k,o({ref:t},m))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},37755:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={id:"Code - Parallel_Computation - Labs - Lab 3",title:"Lab 3",sidebar_position:3},o=void 0,l={unversionedId:"Code/Parallel_Computation/Labs/Code - Parallel_Computation - Labs - Lab 3",id:"Code/Parallel_Computation/Labs/Code - Parallel_Computation - Labs - Lab 3",title:"Lab 3",description:"---",source:"@site/docs/Code/Parallel_Computation/Labs/Lab3.md",sourceDirName:"Code/Parallel_Computation/Labs",slug:"/Code/Parallel_Computation/Labs/Code - Parallel_Computation - Labs - Lab 3",permalink:"/myWiki/docs/Code/Parallel_Computation/Labs/Code - Parallel_Computation - Labs - Lab 3",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Code/Parallel_Computation/Labs/Lab3.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"Code - Parallel_Computation - Labs - Lab 3",title:"Lab 3",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Lab 2",permalink:"/myWiki/docs/Code/Parallel_Computation/Labs/Code - Parallel_Computation - Labs - Lab 2"},next:{title:"MPC Demo",permalink:"/myWiki/docs/Code/Robotics/Code - Robotics - MPC"}},s={},p=[{value:"Test Platform",id:"test-platform",level:3},{value:"Problem 1",id:"problem-1",level:2},{value:"DO/for Directive",id:"dofor-directive",level:3},{value:"SECTIONS Directive",id:"sections-directive",level:3},{value:"Results",id:"results",level:3},{value:"Problem 2",id:"problem-2",level:2},{value:"Results",id:"results-1",level:3},{value:"Analysis",id:"analysis",level:3},{value:"Problem 3",id:"problem-3",level:2},{value:"Comparison",id:"comparison",level:3},{value:"Analysis",id:"analysis-1",level:3}],m={toc:p},c="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"test-platform"},"Test Platform"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Model Name:")," MacBook Pro"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Chip:")," Apple M1 Pro"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Total Number of Cores:")," 8 (6 performance and 2 efficiency)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Memory:")," 16 GB")),(0,r.kt)("h2",{id:"problem-1"},"Problem 1"),(0,r.kt)("h3",{id:"dofor-directive"},"DO/for Directive"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"omp_set_num_threads(4);\n#pragma omp parallel shared(data_point) reduction(+: num_of_points_in_circle) private(i)\n{\n    #pragma omp for schedule(dynamic, 10000000) nowait\n    for (i = 0; i < num_of_points; i++)\n    {\n        if ((data_point[i].x - 0.5) * (data_point[i].x - 0.5) + (data_point[i].y - 0.5) * (data_point[i].y - 0.5) <= 0.25)\n        {\n            num_of_points_in_circle++;\n        }\n    }\n    \n}\n")),(0,r.kt)("h3",{id:"sections-directive"},"SECTIONS Directive"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},"omp_set_num_threads(2);\n#pragma omp parallel shared(data_point) reduction(+: num_of_points_in_circle) private(i)\n{\n    #pragma omp sections nowait\n    {\n        #pragma omp section\n        {\n            for (i = 0; i < num_of_points/2; i++)\n            {\n                if ((data_point[i].x - 0.5) * (data_point[i].x - 0.5) + (data_point[i].y - 0.5) * (data_point[i].y - 0.5) <= 0.25)\n                {\n                    num_of_points_in_circle++;\n                }\n            }\n        }\n        #pragma omp section\n        {\n            for (i = num_of_points/2; i < num_of_points; i++)\n            {\n                if ((data_point[i].x - 0.5) * (data_point[i].x - 0.5) + (data_point[i].y - 0.5) * (data_point[i].y - 0.5) <= 0.25)\n                {\n                    num_of_points_in_circle++;\n                }\n            }\n        }\n    }\n}\n")),(0,r.kt)("h3",{id:"results"},"Results"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Serial version:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Estimated pi is 3.141969, execution time = 0.209164 sec\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Version a:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Estimated pi is 3.141969, execution time = 0.156117 sec\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Version b:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Estimated pi is 3.141969, execution time = 0.222612 sec\n")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"problem-2"},"Problem 2"),(0,r.kt)("h3",{id:"results-1"},"Results"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Serial version:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Execution time = 0.202061 sec\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"m","[i]"," = size \u2212 i version:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Execution time = 0.162220 sec\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"m","[i]"," = rand() version:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Execution time = 0.217134 sec\n")))),(0,r.kt)("h3",{id:"analysis"},"Analysis"),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"problem-3"},"Problem 3"),(0,r.kt)("h3",{id:"comparison"},"Comparison"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"# of threads"),(0,r.kt)("th",{parentName:"tr",align:"center"},"PHW2"),(0,r.kt)("th",{parentName:"tr",align:"center"},"PHW3"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("strong",{parentName:"td"},"1")),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.502734 sec"),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.569594 sec")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("strong",{parentName:"td"},"2")),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.404511 sec"),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.366488 sec")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("strong",{parentName:"td"},"4")),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.341998 sec"),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.254956 sec")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("strong",{parentName:"td"},"8")),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.322975 sec"),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.249094 sec")))),(0,r.kt)("h3",{id:"analysis-1"},"Analysis"),(0,r.kt)("p",null,"For the newer method, the execution time is down for threads of more than one. This is because we don't need to create new threads for each iteration and join all threads at the end of each iteration. Now we just need to create the threads once and inside each thread to perform the iterations, after all, join all threads once. This saves a lot of unnecessary overheads during the execution of threads creation and exit. The only exception is when we only have one thread."))}d.isMDXComponent=!0}}]);